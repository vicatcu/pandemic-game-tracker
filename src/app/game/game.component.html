<ion-grid>
  <ion-row>
    <div class="flex-child">
      <ng-select [items]="nonSafehavenCities"
        class="city-selection"
        bindLabel="name"
        bindValue="name"
        [(ngModel)]="selectedCityId">
      </ng-select>

      <ion-button (click)="infectCity()" class="select-line-button-tweak button-margin float-button"
        expand="block" fill="outline" color="success">Infect City</ion-button>

      <ion-button (click)="uninfectCity()" class="select-line-button-tweak button-margin float-button"
        expand="block" fill="outline" color="secondary">Uninfect City</ion-button>

      <ion-button class="select-line-button-tweak button-margin float-button"
        expand="block" fill="outline" color="danger" (click)="nextRound()">
        {{ topDeckHistory.length === 1 ? 'Start Game' : 'Epidemic' }}
      </ion-button>
    </div>
  </ion-row>


  <ion-row>
    <ion-grid class="data-table">
      <!-- <ion-row>{{ nonSafehavenCitiesLeadingBlank | json }}</ion-row> -->

      <ion-row *ngFor="let city of nonSafehavenCitiesLeadingBlank; trackBy: trackCity" style="border-bottom: thin black solid;">

        <!-- header row -->
        <ng-container *ngIf="city === ''">
          <ion-col *ngFor="let round of topDeckHistoryLeadingBlank; let i = index;" class="round-column table-row">
            <ng-container *ngIf="i === 1">
              <b *ngIf="i">Setup</b>
            </ng-container>
            <ng-container *ngIf="i !== 1">
              <b *ngIf="i">Round {{ i - 1 }}</b>
            </ng-container>
          </ion-col>
        </ng-container>

        <!-- city row -->
        <ng-container *ngIf="city !== ''">
          <ion-col *ngFor="let round of topDeckHistoryLeadingBlank; let i = index;" class="round-column">

            <!-- first column -->
            <ng-container *ngIf="round === ''">
              <div class="table-first-column table-row-data" [style.background]="city.color" [style.color]="contrastColor(city.color)">
                <b>{{ city.name }} <span style="float: right;">({{ city.extantCount }})</span></b>
                <!-- {{ city | json }} -->
              </div>
            </ng-container>

            <!-- subsequent columns -->
            <ng-container *ngIf="round !== ''">
              <div class="table-row-data">
                {{ roundCount(round, city) }}
              </div>
            </ng-container>
          </ion-col>
        </ng-container>
      </ion-row>
    </ion-grid>
  </ion-row>
  <ion-row>
    <ion-col>
      <ng-select [items]="nonSafehavenCities"
        class="city-selection"
        bindLabel="name"
        bindValue="name"
        [(ngModel)]="selectedInfectionId">
      </ng-select>

      <ion-button (click)="addInfectionCard()" class="select-line-button-tweak button-margin float-button"
        expand="block" fill="outline" color="success">Add City</ion-button>

      <ion-button (click)="removeInfectionCard()" class="select-line-button-tweak button-margin float-button"
        expand="block" fill="outline" color="secondary">Remove City</ion-button>

    </ion-col>
  </ion-row>
</ion-grid>

